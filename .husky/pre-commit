#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Checking platform compatibility..."

# If on ARM64, regenerate lockfile for CI
if [[ $(uname -m) == "arm64" ]]; then
  echo "âš ï¸  ARM64 detected, checking Docker..."
  if docker --version >/dev/null 2>&1; then
    echo "ğŸ³ Docker available, preparing CI lockfile..."
    npm run ci:prepare
    git add package-lock.json
  else
    echo "âš ï¸  Docker not running - GitHub Actions will handle platform compatibility"
  fi
fi

npm run lint